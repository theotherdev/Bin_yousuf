import{_ as y}from"./index.astro_astro_type_script_index_0_lang.CA1knb2w.js";class c{static instance;gsapLoaded=!1;loadingPromise=null;static getInstance(){return c.instance||(c.instance=new c),c.instance}async loadGSAP(){return this.gsapLoaded?Promise.resolve():this.loadingPromise?this.loadingPromise:(this.loadingPromise=new Promise((e,t)=>{if(typeof window.gsap<"u"){this.gsapLoaded=!0,e();return}const i=document.createElement("script");i.src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js",i.async=!0;const s=document.createElement("script");s.src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollToPlugin.min.js",s.async=!0;let o=0;const r=2,n=()=>{o++,o===r&&(this.gsapLoaded=!0,e())},a=()=>{t(new Error("Failed to load GSAP"))};i.onload=n,i.onerror=a,s.onload=n,s.onerror=a,document.head.appendChild(i),document.head.appendChild(s)}),this.loadingPromise)}waitForGSAP(e){typeof window.gsap<"u"?e():setTimeout(()=>this.waitForGSAP(e),100)}}let h=[];async function I(){try{const{projects:l}=await y(async()=>{const{projects:e}=await import("./projects.CAx7HXcE.js");return{projects:e}},[]);return l}catch(l){return console.warn("Could not import projects data:",l),[]}}function p(){return window.location.pathname==="/projects"||window.location.pathname==="/projects/"||window.__isProjectsPage===!0}class P{elements;animationState;mainTimeline;ticking=!1;projects;gsapLoader;scrollHandler;resizeHandler;constructor(e){this.projects=e,this.gsapLoader=c.getInstance(),this.elements=this.initializeElements(),this.animationState={scrollY:0,windowHeight:window.innerHeight,progress:0,isAnimating:!1},this.scrollHandler=()=>this.requestTick(),this.resizeHandler=this.debounce(()=>{this.animationState.windowHeight=window.innerHeight,this.handleScroll()},150)}initializeElements(){return{projectsSidebar:document.getElementById("projectsSidebar"),projectItems:document.querySelectorAll(".project-item"),imageItems:document.querySelectorAll(".project-image-item"),animatedProjectImage:document.getElementById("animatedProjectImage"),mainAnimatedImage:document.getElementById("mainAnimatedImage"),firstProjectInGrid:document.querySelector("#project-1")}}waitForGSAP(e){this.gsapLoader.waitForGSAP(e)}initializeGSAPAnimations(){const e=window.gsap;!e||!this.elements.animatedProjectImage||(this.mainTimeline=e.timeline({paused:!0}),e.set(this.elements.animatedProjectImage,{top:"100vh",left:"0",width:"100vw",height:"100vh",opacity:0,borderRadius:"0px",zIndex:999,position:"fixed"}),this.mainTimeline.to(this.elements.animatedProjectImage,{top:"0vh",opacity:1,duration:.3,ease:"power2.out"}).to(this.elements.animatedProjectImage,{duration:.1,ease:"none"}).to(this.elements.animatedProjectImage,{top:"12vh",left:"38vw",width:"60vw",height:"60vh",borderRadius:"12px",duration:.5,ease:"power2.inOut"}).to(this.elements.animatedProjectImage,{duration:.1,ease:"power1.inOut"}))}handleScroll(){const e=window.scrollY,t=window.innerHeight;this.animationState={...this.animationState,scrollY:e,windowHeight:t};const i=t*1.1,s=t*.12,r=i+s-t*.9,n=t*1.8,a=window.gsap,u=document.querySelector("footer");let g=!1;if(u){const w=u.getBoundingClientRect().top+e,f=t*.4;g=e+t>w-f}const j=r+n*.85;if(e>j&&!g?this.elements.projectsSidebar&&!this.elements.projectsSidebar.classList.contains("visible")&&this.showSidebar(a):this.elements.projectsSidebar&&this.elements.projectsSidebar.classList.contains("visible")&&this.hideSidebar(a),!this.elements.animatedProjectImage)return;const m=Math.min(Math.max((e-r)/n,0),1);this.animationState.progress=m,a&&this.mainTimeline?this.mainTimeline.progress(m):this.fallbackAnimation(m),this.handleImageCrossfade(m,a),this.highlightActiveProject()}showSidebar(e){this.elements.projectsSidebar&&(this.elements.projectsSidebar.style.transition="none",e?(e.killTweensOf(this.elements.projectsSidebar),e.fromTo(this.elements.projectsSidebar,{opacity:0,x:-100},{opacity:1,x:0,duration:.8,ease:"power2.out",onComplete:()=>{this.elements.projectsSidebar&&(this.elements.projectsSidebar.style.transition="")}})):(this.elements.projectsSidebar.style.opacity="1",this.elements.projectsSidebar.style.transform="translateX(0)",setTimeout(()=>{this.elements.projectsSidebar&&(this.elements.projectsSidebar.style.transition="")},50)),this.elements.projectsSidebar.classList.add("visible"))}hideSidebar(e){this.elements.projectsSidebar&&(this.elements.projectsSidebar.style.transition="none",e?(e.killTweensOf(this.elements.projectsSidebar),e.to(this.elements.projectsSidebar,{opacity:0,x:-100,duration:.4,ease:"power2.in",onComplete:()=>{this.elements.projectsSidebar&&(this.elements.projectsSidebar.style.transition="")}})):(this.elements.projectsSidebar.style.opacity="0",this.elements.projectsSidebar.style.transform="translateX(-100px)",setTimeout(()=>{this.elements.projectsSidebar&&(this.elements.projectsSidebar.style.transition="")},50)),this.elements.projectsSidebar.classList.remove("visible"))}handleImageCrossfade(e,t){if(this.elements.firstProjectInGrid)if(e<.85)t?(t.set(this.elements.firstProjectInGrid,{opacity:0}),t.set(this.elements.animatedProjectImage,{opacity:1})):(this.elements.firstProjectInGrid.style.opacity="0",this.elements.animatedProjectImage&&(this.elements.animatedProjectImage.style.opacity="1"));else if(e>=.85&&e<1){const i=(e-.85)/.15,s=this.easeInOutCubic(i),o=1-s;t?(t.set(this.elements.animatedProjectImage,{opacity:o}),t.set(this.elements.firstProjectInGrid,{opacity:s})):(this.elements.animatedProjectImage&&(this.elements.animatedProjectImage.style.opacity=o.toString()),this.elements.firstProjectInGrid.style.opacity=s.toString())}else t?(t.set(this.elements.firstProjectInGrid,{opacity:1}),t.set(this.elements.animatedProjectImage,{opacity:0,pointerEvents:"none",zIndex:-1})):(this.elements.firstProjectInGrid.style.opacity="1",this.elements.animatedProjectImage&&(this.elements.animatedProjectImage.style.opacity="0",this.elements.animatedProjectImage.style.pointerEvents="none",this.elements.animatedProjectImage.style.zIndex="-1"))}easeInOutCubic(e){return e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2}fallbackAnimation(e){if(this.elements.animatedProjectImage)if(e===0)this.elements.animatedProjectImage.style.top="100vh",this.elements.animatedProjectImage.style.left="0",this.elements.animatedProjectImage.style.width="100vw",this.elements.animatedProjectImage.style.height="100vh",this.elements.animatedProjectImage.style.opacity="0",this.elements.animatedProjectImage.style.borderRadius="0px",this.elements.animatedProjectImage.style.position="fixed";else if(e<.3){const t=e/.3,i=this.easeInOutCubic(t),s=100-i*100;this.elements.animatedProjectImage.style.top=`${s}vh`,this.elements.animatedProjectImage.style.left="0",this.elements.animatedProjectImage.style.width="100vw",this.elements.animatedProjectImage.style.height="100vh",this.elements.animatedProjectImage.style.opacity=i.toString(),this.elements.animatedProjectImage.style.borderRadius="0px"}else if(e<.4)this.elements.animatedProjectImage.style.top="0vh",this.elements.animatedProjectImage.style.left="0",this.elements.animatedProjectImage.style.width="100vw",this.elements.animatedProjectImage.style.height="100vh",this.elements.animatedProjectImage.style.opacity="1",this.elements.animatedProjectImage.style.borderRadius="0px";else if(e<.9){const t=(e-.4)/.5,i=this.easeInOutCubic(t),s=0+i*12,o=0+i*38,r=100-i*40,n=100-i*40,a=i*12;this.elements.animatedProjectImage.style.top=`${s}vh`,this.elements.animatedProjectImage.style.left=`${o}vw`,this.elements.animatedProjectImage.style.width=`${r}vw`,this.elements.animatedProjectImage.style.height=`${n}vh`,this.elements.animatedProjectImage.style.opacity="1",this.elements.animatedProjectImage.style.borderRadius=`${a}px`}else this.elements.animatedProjectImage.style.top="12vh",this.elements.animatedProjectImage.style.left="38vw",this.elements.animatedProjectImage.style.width="60vw",this.elements.animatedProjectImage.style.height="60vh",this.elements.animatedProjectImage.style.borderRadius="12px"}scrollSidebarToActiveProject(e){if(!this.elements.projectsSidebar||!e)return;const t=window.gsap,i=this.elements.projectsSidebar.getBoundingClientRect(),s=e.getBoundingClientRect(),o=s.top-i.top,r=s.bottom-i.top,n=this.elements.projectsSidebar.clientHeight,a=this.elements.projectsSidebar.scrollTop;t?o<0?t.to(this.elements.projectsSidebar,{scrollTop:a+o-20,duration:.5,ease:"power2.out"}):r>n&&t.to(this.elements.projectsSidebar,{scrollTop:a+(r-n)+20,duration:.5,ease:"power2.out"}):o<0?this.elements.projectsSidebar.scrollTo({top:a+o-20,behavior:"smooth"}):r>n&&this.elements.projectsSidebar.scrollTo({top:a+(r-n)+20,behavior:"smooth"})}setupProjectInteractions(){this.elements.projectItems.forEach(e=>{e.addEventListener("click",()=>{this.elements.projectItems.forEach(i=>i.classList.remove("active")),e.classList.add("active");const t=e.dataset.scrollTarget||null;if(t){const i=document.getElementById(t);i&&this.scrollToTarget(i)}})})}scrollToTarget(e){const s=e.getBoundingClientRect().top+window.pageYOffset-80,o=window.gsap;o?(o.to(window,{scrollTo:s,duration:1,ease:"power2.out"}),this.highlightElement(e,o)):(window.scrollTo({top:s,behavior:"smooth"}),e.style.transform="translateY(-15px)",e.style.boxShadow="0 40px 100px rgba(0, 0, 0, 0.25)",setTimeout(()=>{e.style.transform="translateY(0)",e.style.boxShadow="0 20px 60px rgba(0, 0, 0, 0.15)"},2e3))}highlightElement(e,t){t&&t.timeline().to(e,{y:-15,boxShadow:"0 40px 100px rgba(0, 0, 0, 0.25)",duration:.6,ease:"power2.out"}).to(e.querySelector(".project-image"),{scale:1.02,duration:.6,ease:"power2.out"},0).to(e,{y:0,boxShadow:"0 20px 60px rgba(0, 0, 0, 0.15)",duration:.6,ease:"power2.out",delay:1.4}).to(e.querySelector(".project-image"),{scale:1,duration:.6,ease:"power2.out"},"-=0.6")}highlightActiveProject(){const e=window.scrollY+window.innerHeight/2;this.elements.imageItems.forEach(t=>{const i=t.getBoundingClientRect(),s=i.top+window.scrollY,o=s+i.height;if(e>=s&&e<=o){this.elements.projectItems.forEach(n=>n.classList.remove("active"));const r=t.dataset.project;if(r){const n=document.querySelector(`.project-item[data-project="${r}"]`);n&&(n.classList.add("active"),this.scrollSidebarToActiveProject(n))}}})}debounce(e,t){let i;return function(...o){const r=()=>{clearTimeout(i),e(...o)};clearTimeout(i),i=setTimeout(r,t)}}requestTick(){this.ticking||(requestAnimationFrame(()=>{this.handleScroll(),this.ticking=!1}),this.ticking=!0)}async initialize(){if(p()){console.log("ðŸš« Skipping main.ts initialization on projects page");return}try{await this.gsapLoader.loadGSAP(),this.initializeGSAPAnimations(),this.setupProjectInteractions(),window.__scrollHandlers=window.__scrollHandlers||[],window.__scrollHandlers.push(this.scrollHandler),window.addEventListener("scroll",this.scrollHandler,{passive:!0}),window.addEventListener("resize",this.resizeHandler),this.handleScroll(),console.log("ðŸš€ App initialized with GSAP animations!")}catch(e){console.warn("GSAP failed to load, using fallback animations:",e),this.setupProjectInteractions(),window.__scrollHandlers=window.__scrollHandlers||[],window.__scrollHandlers.push(this.scrollHandler),window.addEventListener("scroll",this.scrollHandler,{passive:!0}),window.addEventListener("resize",this.resizeHandler),this.handleScroll(),console.log("ðŸš€ App initialized with fallback animations!")}}cleanup(){window.removeEventListener("scroll",this.scrollHandler),window.removeEventListener("resize",this.resizeHandler),this.mainTimeline&&this.mainTimeline.kill();const e=window.__scrollHandlers||[],t=e.indexOf(this.scrollHandler);t>-1&&e.splice(t,1)}}class S{words;currentIndex=0;animatedTextElement;intervalId=null;timeoutId=null;constructor(e){this.words=e,this.animatedTextElement=document.getElementById("animatedText")}changeWord(){this.animatedTextElement&&(this.animatedTextElement.classList.add("blur-out"),this.timeoutId=setTimeout(()=>{this.animatedTextElement&&(this.currentIndex=(this.currentIndex+1)%this.words.length,this.animatedTextElement.textContent=this.words[this.currentIndex],this.animatedTextElement.classList.remove("blur-out"),this.animatedTextElement.classList.add("blur-in"),this.timeoutId=setTimeout(()=>{this.animatedTextElement&&this.animatedTextElement.classList.remove("blur-in")},800))},400))}initialize(){p()||(this.timeoutId=setTimeout(()=>{this.intervalId=setInterval(()=>this.changeWord(),3e3)},2e3))}cleanup(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null),this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}}class b{projectController=null;heroController=null;isInitialized=!1;constructor(){}async initializeControllers(){if(p()){console.log("ðŸš« Skipping controller initialization on projects page");return}if(h=await I(),h.length===0){console.warn("No projects loaded, skipping initialization");return}const e=h.map(t=>t.name.toUpperCase());this.projectController=new P(h),this.heroController=new S(e)}async initialize(){if(!this.isInitialized){if(p()){console.log("ðŸš« Skipping app initialization on projects page");return}try{await this.initializeControllers(),document.readyState==="loading"?document.addEventListener("DOMContentLoaded",async()=>{await this.initializeApp()}):await this.initializeApp()}catch(e){console.error("Failed to initialize app:",e)}}}async initializeApp(){if(this.projectController&&this.heroController)try{await this.projectController.initialize(),this.heroController.initialize(),this.isInitialized=!0,console.log("âœ… App fully initialized with footer detection")}catch(e){console.error("Error during app initialization:",e)}}cleanup(){this.projectController&&this.projectController.cleanup(),this.heroController&&this.heroController.cleanup(),this.isInitialized=!1}}let d=null;window.__appController&&window.__appController.cleanup();d=new b;window.__appController=d;d.initialize().catch(console.error);window.addEventListener("beforeunload",()=>{d&&d.cleanup()});
